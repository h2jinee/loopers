### 기능적 요구사항
##### 상품
- 상품 목록을 조회할 수 있다.
	- 품절 상품도 목록에 표시되며 "품절" 상태를 표시한다.
	- 페이지네이션을 지원한다. (기본 20개, 최대 100개)
- 상품 목록을 정렬할 수 있다.
	- 정렬 기준: 가격, 좋아요 수, 등록일
	- 정렬 방향: 오름차순/내림차순
	- 기본값: 최근 등록순 내림차순
- 상품 목록을 필터링 할 수 있다.
    - 카테고리, 브랜드, 가격, 출시년도
- 상품 목록에는 각 상품별로 좋아요 수가 표시 된다.
- 상품 상세 조회 시 다음 정보가 표시 된다.
	- 브랜드명, 금액, 썸네일 이미지, 상품 설명, 상품명, 배송비, 총 좋아요 수, 상품 상세 이미지 
- 사용자는 상품의 정확한 재고 수량을 확인할 수 없다.
- 상품을 검색할 수 있다.
	- 검색 대상: 상품명, 브랜드명
	- 검색 방식: 부분 일치 (like 검색)

##### 브랜드
- 브랜드 목록을 조회할 수 있다.
	- 페이지네이션을 지원한다.
- 브랜드마다 개별적으로 카테고리를 가지고 있다.
	- 카테고리는 단일 선택이며 텍스트 형태다.
- 특정 브랜드의 상품 목록을 볼 수 있다.
- 브랜드 조회 시 상세 정보를 조회할 수 있다.
	- 해당 브랜드 커버 이미지, 브랜드 프로필 이미지, 브랜드 영어 이름, 브랜드 한국 이름
- 브랜드를 검색할 수 있다.
	- 검색 대상: 브랜드 한국 이름, 영어 이름

##### 주문
- 사용자는 로그인한 상태에서만 상품을 주문할 수 있다.
- 주문 시 1개의 상품만 주문할 수 있다.
- 주문 시 1개의 수량만 주문할 수 있다.
- 주문 생성 시 재고를 확인하고 재고가 없을 경우 오류를 반환한다.
- 주문 생성 시 재고를 임시 차감한다.
- 주문 생성 시 주문 상태는 **결제 대기**로 생성된다.
- 주문 생성 시 사용자 정보가 없을 경우 오류를 반환한다.
- 주문 시 포인트를 확인하고 차감한다.
- 주문 시 쿠폰을 선택하여 적용할 수 있다.
- 사용자는 자신의 주문 목록을 조회할 수 있다.
- 주문 상태는 결제대기, 결제완료, 배송준비중, 배송중, 배송완료, 주문취소가 있다.

##### 결제
- 결제 수단은 포인트 결제만 지원한다.
- 결제 시 포인트 잔액을 확인하고, 포인트가 부족할 경우 오류를 반환한다.
- 결제 완료 시 주문 상태를 업데이트한다.
- 결제 완료 시 포인트를 차감한다.
- 결제 완료 시 주문 상태를 '결제 완료'로 변경한다.
- 결제 완료 시 재고를 확정 차감한다.
- 결제 실패 시 임시 차감된 재고와 포인트를 복원한다.
- 결제 실패 시 주문 상태를 '결제 실패'로 변경한다.

##### 좋아요
- 사용자는 로그인한 상태에서만 좋아요를 등록할 수 있다.
- 사용자는 로그인한 상태에서만 좋아요를 취소할 수 있다.
- 좋아요는 사용자별로 상품당 1개만 가능하다.
- 사용자는 자신이 좋아요한 상품 목록을 조회할 수 있다.
- 상품별 좋아요 수를 집계하여 표시한다.

##### 쿠폰
- 사용자는 보유 쿠폰 목록을 조회할 수 있다.
- 쿠폰은 유효 기간이 존재한다.
- 쿠폰은 1회 사용 후 소멸된다.
- 쿠폰은 주문당 1개의 쿠폰만 적용할 수 있다.

### 비기능적 요구사항
- 좋아요 추가/해제 기능은 멱등하게 동작해야 한다.
- 상품 정렬 기준으로 가격순, 좋아요순, 최근 등록 순을 선택할 수 있다.
- 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다.
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

| 케이스               | 설명                             | HTTP 상태코드                 |
| ----------------- | ------------------------------ | ------------------------- |
| 잘못된 요청 형식         | JSON 파싱 실패, 필수 파라미터 누락         | 400 BAD REQUEST           |
| 서버 내부 오류          | DB 연결 실패, 예상치 못한 예외            | 500 INTERNAL SERVER ERROR |
| 미인증               | X-USER-ID 헤더 없음 또는 유효하지 않은 사용자 | 401 UNAUTHORIZED          |
| 상품 미존재            | 존재하지 않는 productId              | 404 NOT FOUND             |
| 상품 갯수가 최대 갯수를 넘어감 | 비즈니스 룰을 벗어나는 예외                | 400 BAD REQUEST           |
| 상품 구매 불가          | 품절, 판매중단 등 구매 불가 상태            | 409 CONFLICT              |
| 재고 부족             | 주문 수량이 재고보다 많음                 | 409 CONFLICT              |
| 포인트 부족            | 보유 포인트 < 결제 금액                 | 409 CONFLICT              |
| 결제 진행 중           | 이미 결제가 진행 중인 주문                | 409 CONFLICT              |
| 결제 시간 초과          | 주문 후 10분 초과                    | 408 REQUEST TIMEOUT       |

- 응답은 일관된 JSON 형식을 사용한다.
- 좋아요 수는 실시간 집계가 아닌 배치를 통해 집계된 값을 사용한다.
- 결제 실패 시 보상 트랜잭션을 통해 데이터 정합성을 보장한다.
